<html>
  <head>
    <script src="./magnet.min.js"></script>
    <style>
      body {
        margin: 0;
      }
      #canvas {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 1;
      }
      #x, #y {
        --size: 1px;

        position: fixed;
        top: calc(-1 * var(--size));
        left: calc(-1 * var(--size));
        background-color: #000;
        opacity: .25;
        pointer-events: none;
        z-index: 100;
      }
      #x {
        transform: translateY(-50%);
        height: var(--size);
        right: 0;
      }
      #y {
        transform: translateX(-50%);
        width: var(--size);
        bottom: 0;
      }
    </style>
  </head>
  <body>
    <div id="canvas">
      <magnet-block
        style="width:100px; height:150px; background:#fcc; display:inline-block; z-index: 1;"
        group="a"
        attractDistance="15"
        alignTo=""
      >
        Hi
      </magnet-block>
      <magnet-block
        style="width:150px; height:100px; background:#cfc; display:inline-block;"
        group="a"
        attractDistance="15"
        alignTo="outer"
        alignToParent="center|inner"
        x-crossPrevent="parent|target"
      >
        Yo
      </magnet-block>
    </div>

    <div id="x"></div>
    <div id="y"></div>
  </body>
  <script>
    (function() {
      const domX = document.getElementById('x');
      const domY = document.getElementById('y');

      function onMagnetEnd() {
        domX.style.top = '';
        domY.style.left = '';
      }
      function onAttractOrAlignChange(event) {
        const {
          detail: {
            result: {
              x: {
                alignment: xAlignment,
              },
              y: {
                alignment: yAlignment,
              },
              nearest,
            },
            target: {
              rectangle: rectTarget,
            },
          },
        } = event;

        let posX, posY;

        switch (xAlignment) {
          case Magnet.ALIGNMENT.rightToRight:
          case Magnet.ALIGNMENT.leftToRight:
            posX = rectTarget.right;
            break;

          case Magnet.ALIGNMENT.rightToLeft:
          case Magnet.ALIGNMENT.leftToLeft:
            posX = rectTarget.left;
            break;

          case Magnet.ALIGNMENT.xCenterToXCenter:
            posX = .5 * (rectTarget.right + rectTarget.left);
            break;
        }
        switch (yAlignment) {
          case Magnet.ALIGNMENT.topToTop:
          case Magnet.ALIGNMENT.bottomToTop:
            posY = rectTarget.top;
            break;

          case Magnet.ALIGNMENT.topToBottom:
          case Magnet.ALIGNMENT.bottomToBottom:
            posY = rectTarget.bottom;
            break;

          case Magnet.ALIGNMENT.yCenterToYCenter:
            posY = .5 * (rectTarget.top + rectTarget.bottom);
            break;
        }
        domX.style.top = isNaN(posY) ?'' :`${posY}px`;
        domY.style.left = isNaN(posX) ?'' :`${posX}px`;
      }

      Array
        .from(document.querySelectorAll('magnet-block'))
        .forEach(function(dom) {
          dom.addEventListener('magnetend', onMagnetEnd);
          dom.addEventListener('magnetunattract', onAttractOrAlignChange);
          dom.addEventListener('magnetattract', onAttractOrAlignChange);
        });
    })();
  </script>
</html>