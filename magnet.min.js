!function r(i,s,a){function o(e,t){if(!s[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=s[e]={exports:{}},i[e][0].call(n.exports,function(t){return o(i[e][1][t]||t)},n,n.exports,r,i,s,a)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)o(a[t]);return o}({1:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.MagnetGroup=n.MagnetBase=void 0;const i=t("./libs/Magnet");Object.defineProperty(n,"MagnetGroup",{enumerable:!0,get:function(){return i.MagnetGroup}});t=r(t("./libs/Magnet/Base"));n.MagnetBase=t.default,Promise.all([{elem:i.Magnet,nodeName:"magnet-block"},{elem:i.MagnetGroup,nodeName:"magnet-group"}].map(({elem:t,nodeName:e})=>customElements.get(e)?Promise.resolve():(customElements.define(e,t),customElements.whenDefined(e)))).then(()=>{}),n.default=i.Magnet},{"./libs/Magnet":10,"./libs/Magnet/Base":2}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Events=n.CrossPrevents=n.AlignToParents=n.AlignTos=n.ALIGNMENT_Y=n.ALIGNMENT_X=n.Alignments=n.Attributes=void 0;const r=t("../stdlib");var i,s,a,o,l,u;function c(t){t=r.objMap(t,t=>({value:t,enumerable:!0}));return Object.defineProperties({},t)}(u=i=n.Attributes||(n.Attributes={})).disabled="mg-disabled",u.group="mg-group",u.unattractable="mg-unattractable",u.unmovable="mg-unmovable",u.attractDistance="mg-attract-distance",u.alignTo="mg-align-to",u.alignToParent="mg-align-to-parent",u.crossPrevent="mg-cross-prevent",(o=s=n.Alignments||(n.Alignments={})).topToTop="topToTop",o.topToBottom="topToBottom",o.rightToRight="rightToRight",o.rightToLeft="rightToLeft",o.bottomToTop="bottomToTop",o.bottomToBottom="bottomToBottom",o.leftToRight="leftToRight",o.leftToLeft="leftToLeft",o.xCenterToXCenter="xCenterToXCenter",o.yCenterToYCenter="yCenterToYCenter",n.ALIGNMENT_X=[s.rightToRight,s.rightToLeft,s.leftToRight,s.leftToLeft,s.xCenterToXCenter],n.ALIGNMENT_Y=[s.topToTop,s.topToBottom,s.bottomToTop,s.bottomToBottom,s.yCenterToYCenter],(l=a=n.AlignTos||(n.AlignTos={})).outer="outer",l.inner="inner",l.center="center",l.outerline="outerline",(u=t=n.AlignToParents||(n.AlignToParents={})).inner="inner",u.center="center",(o=n.CrossPrevents||(n.CrossPrevents={})).parent="parent",(u=l=n.Events||(n.Events={})).start="mg-start",u.move="mg-move",u.end="mg-end",u.attract="mg-attract",u.attractmove="mg-attractmove",u.unattract="mg-unattract",u.attracted="mg-attracted",u.attractedmove="mg-attractedmove",u.unattracted="mg-unattracted";const f=/[|;,\s]/;function h(t,e){return(r.isstr(t)?t.split(f):r.toarray(t).filter(r.isstr)).filter(t=>t in e).join("|")}function d(t,e,n){return r.isstr(t)?t.split(f).filter(t=>t in e):n}const g=[a.outer,a.inner,a.center,a.outerline],m=[],p=[],v=document.createElement("template");v.innerHTML=`
<style>
  :host {
    position: relative;
    display: inline-block;
  }
</style>
<slot>
</slot>
`;class b extends HTMLElement{constructor(){var t;super(),this.attachShadow({mode:"open"}),null!==(t=this.shadowRoot)&&void 0!==t&&t.appendChild(v.content.cloneNode(!0))}static getAlignmentsOfAlignTo(t=[]){const e=[];return t.includes(this.ALIGN_TO.outer)&&(e.push(this.ALIGNMENT.topToBottom),e.push(this.ALIGNMENT.rightToLeft),e.push(this.ALIGNMENT.bottomToTop),e.push(this.ALIGNMENT.leftToRight)),t.includes(this.ALIGN_TO.inner)&&(e.push(this.ALIGNMENT.topToTop),e.push(this.ALIGNMENT.rightToRight),e.push(this.ALIGNMENT.bottomToBottom),e.push(this.ALIGNMENT.leftToLeft)),t.includes(this.ALIGN_TO.center)&&(e.push(this.ALIGNMENT.xCenterToXCenter),e.push(this.ALIGNMENT.yCenterToYCenter)),e}set disabled(t){t?this.setAttribute(i.disabled,""):this.removeAttribute(i.disabled)}get disabled(){return r.isstr(this.traceMagnetAttributeValue(i.disabled))}set group(t){r.isstr(t)?this.setAttribute(i.group,t):this.removeAttribute(i.group)}get group(){return this.traceMagnetAttributeValue(i.group)}get parentGroupNode(){var t=this.getAttribute(i.group);let e=this.parentElement;for(;e;){if(e instanceof b&&(!r.isstr(t)||e.group===t))return e;e=e.parentElement}return null}set unattractable(t){t?this.setAttribute(i.unattractable,""):this.removeAttribute(i.unattractable)}get unattractable(){return r.isstr(this.traceMagnetAttributeValue(i.unattractable))}set unmovable(t){t?this.setAttribute(i.unmovable,""):this.removeAttribute(i.unmovable)}get unmovable(){return r.isstr(this.traceMagnetAttributeValue(i.unmovable))}set attractDistance(t){r.isnum(t)&&this.setAttribute(i.attractDistance,r.tostr(t))}get attractDistance(){var t=this.traceMagnetAttributeValue(i.attractDistance),t=r.tonum(r.isstr(t)?t:0);return Number.NaN===t?0:t}set alignTo(t){t=h(t,b.ALIGN_TO);this.setAttribute(i.alignTo,t)}get alignTo(){return d(this.traceMagnetAttributeValue(i.alignTo),b.ALIGN_TO,g)}set alignToParent(t){t=h(t,b.ALIGN_TO_PARENT);this.setAttribute(i.alignToParent,t)}get alignToParent(){return d(this.traceMagnetAttributeValue(i.alignToParent),b.ALIGN_TO_PARENT,m)}set crossPrevent(t){t=h(t,b.CROSS_PREVENT);this.setAttribute(i.crossPrevent,t)}get crossPrevent(){return d(this.traceMagnetAttributeValue(i.crossPrevent),b.CROSS_PREVENT,p)}traceMagnetAttributeValue(t){var e=this.getAttribute(t);if(r.isstr(e))return e;const{parentGroupNode:n}=this;return n?n.traceMagnetAttributeValue(t):null}triggerMagnetEvent(t,{detail:e,composed:n=!1,cancelable:r=!0,bubbles:i=!1}={}){i=new CustomEvent(t,{detail:e,composed:n,cancelable:r,bubbles:i});return!this.dispatchEvent(i)}}(n.default=b).ALIGNMENT=c({topToTop:s.topToTop,topToBottom:s.topToBottom,rightToRight:s.rightToRight,rightToLeft:s.rightToLeft,bottomToTop:s.bottomToTop,bottomToBottom:s.bottomToBottom,leftToRight:s.leftToRight,leftToLeft:s.leftToLeft,xCenterToXCenter:s.xCenterToXCenter,yCenterToYCenter:s.yCenterToYCenter}),b.ALIGN_TO=c({outer:a.outer,inner:a.inner,center:a.center,outerline:a.outerline}),b.ALIGN_TO_PARENT=c({inner:t.inner,center:t.center}),b.CROSS_PREVENT=c({parent:o.parent}),b.EVENT=c({start:l.start,move:l.move,end:l.end,attract:l.attract,attractmove:l.attractmove,unattract:l.unattract,attracted:l.attracted,attractedmove:l.attractedmove,unattracted:l.unattracted})},{"../stdlib":14}],3:[function(t,e,n){"use strict";var E,r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__rest||function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Styles=void 0;const y=t("../Rect"),S=o(t("../Rect/Point")),$=o(t("../Rect/Rect")),A=t("../stdlib"),V=s(t("./Base")),B=t("./calc"),X=t("./handler"),l=["mousedown","touchstart"],M=["mousemove","touchmove"],N=["mouseup","touchend"];(t=E=n.Styles||(n.Styles={})).offsetX="--mg-offset-x",t.offsetY="--mg-offset-y";class Y extends V.default{constructor(){super(),this.judgeDistance=(t,e,n,r)=>{var{absVal:i}=t,{attractDistance:s}=r;if(s<i)return!1;var{rawVal:a,alignment:t}=t,{rectangle:o}=n;if(r.crossPreventParent&&r.parentPack){var{parentPack:{rectangle:l}}=r;switch(t){default:return!1;case Y.ALIGNMENT.topToTop:case Y.ALIGNMENT.topToBottom:if(l.top>o.top+a)return!1;break;case Y.ALIGNMENT.rightToRight:case Y.ALIGNMENT.rightToLeft:if(l.right<o.right+a)return!1;break;case Y.ALIGNMENT.bottomToTop:case Y.ALIGNMENT.bottomToBottom:if(l.bottom<o.bottom+a)return!1;break;case Y.ALIGNMENT.leftToLeft:case Y.ALIGNMENT.leftToRight:if(l.left>o.left+a)return!1;break;case V.Alignments.xCenterToXCenter:if(l.right<o.right+a||l.left>o.left+a)return!1;break;case V.Alignments.yCenterToYCenter:if(l.top>o.top+a||l.bottom<o.bottom+a)return!1}}if(r.alignToOuterline)return!0;var{rectangle:u}=e;switch(t){default:return!0;case Y.ALIGNMENT.xCenterToXCenter:case Y.ALIGNMENT.yCenterToYCenter:return!0;case Y.ALIGNMENT.rightToRight:case Y.ALIGNMENT.leftToLeft:case Y.ALIGNMENT.rightToLeft:case Y.ALIGNMENT.leftToRight:var{top:c,bottom:f}=o,{top:h,bottom:d}=u;return B.isinAttractRange(s,c,f,h,d)?!0:!!B.isinAttractRange(s,h,d,c,f);case Y.ALIGNMENT.topToTop:case Y.ALIGNMENT.bottomToBottom:case Y.ALIGNMENT.topToBottom:case Y.ALIGNMENT.bottomToTop:var{right:h,left:d}=o,{right:c,left:f}=u;return B.isinAttractRange(s,d,h,f,c)?!0:!!B.isinAttractRange(s,f,c,d,h)}},this.judgeAttractSummary=t=>A.isset(t.best.any),this.judgeParentDistance=(...t)=>this.judgeDistance(...t),this.attributeChangedCallback(V.Attributes.disabled)}static calcAttraction(t,e,n={},r){var{alignments:i=A.objValues(this.ALIGNMENT),absDistance:s=!0}=n,n=a(n,["alignments","absDistance"]);return B.calcAttraction(t,e,Object.assign(Object.assign({},n),{alignments:i,absDistance:s}),r)}static calcMultiAttractions(t,e=[],n,r){var{alignments:i=A.objValues(this.ALIGNMENT),absDistance:s=!0}=n,n=a(n,["alignments","absDistance"]);return B.calcMultiAttractions(t,e,Object.assign(Object.assign({},n),{alignments:i,absDistance:s}),r)}attributeChangedCallback(t){switch(t){case V.Attributes.disabled:this.disabled?X.removeEventListener(this,l,this.handleMagnetDragStart):this.unmovable||X.addEventListener(this,l,this.handleMagnetDragStart);break;case V.Attributes.unmovable:this.unmovable?X.removeEventListener(this,l,this.handleMagnetDragStart):this.disabled||X.addEventListener(this,l,this.handleMagnetDragStart)}}getMagnetTargets(){const{group:e}=this;var t=this.localName,n=`${`:not([${V.Attributes.disabled}])`}${`:not([${V.Attributes.unattractable}])`}`;const r=A.toarray(document.querySelectorAll(`${t}${n}`)||[]);return r.filter(t=>(!A.isstr(e)||e===t.group)&&t!==this)}calcAttraction(t,e,n){return Y.calcAttraction(this,t,e,n)}calcMultiAttractions(t,e,n){return Y.calcMultiAttractions(this,t,e,n)}resetMagnetOffset(){this.style.removeProperty(E.offsetX),this.style.removeProperty(E.offsetY),this.style.removeProperty("transform")}handleMagnetOffset(t,e){S.default.isPoint(t)&&(this.style.setProperty(E.offsetX,`${t.x}px`),this.style.setProperty(E.offsetY,`${t.y}px`)),this.style.setProperty(E.offsetX,`${t}px`),this.style.setProperty(E.offsetY,`${e}px`)}handleMagnetDragStart(t){if(!this.disabled&&!this.unmovable){var{position:n,zIndex:r,transform:i}=A.getStyle(this);const{disabled:c,unattractable:f,unmovable:h,group:d,alignTo:g,alignToParent:m,crossPrevent:p,attractDistance:v,parentElement:b}=this;var s=new S.default(A.tonum(this.style.getPropertyValue(E.offsetX)||0),A.tonum(this.style.getPropertyValue(E.offsetY)||0)),a=new y.Pack(this),o=A.isnull(b)?void 0:new y.Pack(b),l=p.includes(Y.CROSS_PREVENT.parent),u={attractDistance:v,alignToOuterline:g.includes(Y.ALIGN_TO.outerline),crossPreventParent:l,parentPack:o};let e={attractDistance:v,alignTo:g,alignToOuter:g.includes(Y.ALIGN_TO.outer),alignToInner:g.includes(Y.ALIGN_TO.inner),alignToCenter:g.includes(Y.ALIGN_TO.center),alignToOuterline:g.includes(Y.ALIGN_TO.outerline),alignToParent:m,alignToParentInner:m.includes(Y.ALIGN_TO_PARENT.inner),alignToParentCenter:m.includes(Y.ALIGN_TO_PARENT.center),crossPrevent:p,crossPreventParent:l,alignments:Y.getAlignmentsOfAlignTo(g),parentAlignments:Y.getAlignmentsOfAlignTo(m),onJudgeDistance:this.judgeDistance.bind(this),onJudgeAttractSummary:this.judgeAttractSummary.bind(this),onJudgeParentDistance:this.judgeParentDistance.bind(this),disabled:c,group:d,unattractable:f,unmovable:h,parent:o,targets:this.getMagnetTargets().map(t=>new y.Pack(t)),self:a,originStyle:{position:n,zIndex:r,transform:i},startXY:X.getEvtClientXY(t),lastOffset:s,attachOptions:u};if(!this.triggerMagnetEvent(Y.EVENT.start,X.generateDragEventDetail(t,e))){const T=t=>{this.triggerMagnetEvent(Y.EVENT.move,X.generateDragEventDetail(t,e))||(e=this.handleMagnetDragMove(t,e))},w=t=>{this.triggerMagnetEvent(Y.EVENT.end,X.generateDragEventDetail(t,e))||(this.handleMagnetDragEnd(t,e),X.removeEventListener(window,M,T),X.removeEventListener(window,N,w))};switch(t.preventDefault(),t.stopImmediatePropagation(),n){case"relative":case"fixed":case"absolute":break;default:this.style.setProperty("position","relative")}this.style.setProperty("z-index",A.tostr(A.toint(Date.now()/1e3))),this.style.setProperty("transform",`translate(var(${E.offsetX}), var(${E.offsetY}))`,"important"),X.addEventListener(window,M,T),X.addEventListener(window,N,w),e=this.handleMagnetDragMove(t,e)}}}handleMagnetDragMove(t,e){var{crossPreventParent:n,alignments:r,parentAlignments:i,onJudgeDistance:s,onJudgeAttractSummary:a,onJudgeParentDistance:o,unattractable:l,parent:u,targets:c,self:{rectangle:f},startXY:h,lastOffset:d,lastAttractSummary:g,attachOptions:m}=e,{rectangle:p}=u||{},{x:v,y:b,width:T,height:w}=f,t=X.getEvtClientXY(t),h=new S.default(t.x-h.x,t.y-h.y),h=new $.default(f).offset(h);const E=new $.default(h);n&&p&&(E.left<p.left?E.moveToX(p.left):E.left+T>p.right&&E.moveToX(p.right-T),E.top<p.top?E.moveToY(p.top):E.top+w>p.bottom&&E.moveToY(p.bottom-w));const y=new $.default(E);let A;do{if(l)break;A=Y.calcMultiAttractions(E,c,{alignments:r,onJudgeDistance:s,onJudgeAttractSummary:a,bindAttraction:0<i.length&&u?Y.calcAttraction(E,u,{alignments:i,onJudgeDistance:o},m):void 0},m);var{best:M}=A,{x:N,y:_}=M,P=null===(I=null==g?void 0:g.best)||void 0===I?void 0:I.x,R=null===(O=null==g?void 0:g.best)||void 0===O?void 0:O.y;const x=null==P?void 0:P.target,G=null==R?void 0:R.target,k=null==N?void 0:N.target,C=null==_?void 0:_.target;var L=x!==k,D=G!==C;const j=B.getOffsetOfAttractResult(M);var I=new $.default(E).offset(j),O=X.generateAttractEventDetail(A,I);if(!L||!D){if(this.triggerMagnetEvent(Y.EVENT.attractmove,O))break;if(!L&&k instanceof V.default&&k.triggerMagnetEvent(Y.EVENT.attractedmove,O))break;if(!D&&C instanceof V.default&&C.triggerMagnetEvent(Y.EVENT.attractedmove,O))break}if((x||G)&&(M=x&&L,I=G&&D,(M||I)&&(this.triggerMagnetEvent(Y.EVENT.unattract,O),M&&x instanceof V.default&&x.triggerMagnetEvent(Y.EVENT.unattracted,O),I&&G instanceof V.default&&G.triggerMagnetEvent(Y.EVENT.unattracted,O))),k||C){P=null==P?void 0:P.alignment,R=null==R?void 0:R.alignment,N=null==N?void 0:N.alignment,_=null==_?void 0:_.alignment,N=k&&(L||P!==N),_=C&&(D||R!==_);if(N||_){if(this.triggerMagnetEvent(Y.EVENT.attract,O))break;N&&k instanceof V.default&&k.triggerMagnetEvent(Y.EVENT.attracted,O)&&(j.x=0),_&&C instanceof V.default&&C.triggerMagnetEvent(Y.EVENT.attracted,O)&&(j.y=0)}}y.offset(j)}while(0);v=y.x-v+d.x,d=y.y-b+d.y;return this.handleMagnetOffset(v,d),Object.assign(Object.assign({},e),{lastAttractSummary:A})}handleMagnetDragEnd(t,e){var{originStyle:{position:n,zIndex:e}}=e;A.isset(n)&&this.style.setProperty("position",n),A.isset(e)&&this.style.setProperty("z-index",e)}}n.default=Y,Y.observedAttributes=[V.Attributes.disabled,V.Attributes.unmovable]},{"../Rect":13,"../Rect/Point":11,"../Rect/Rect":12,"../stdlib":14,"./Base":2,"./calc":8,"./handler":9}],4:[function(t,e,n){"use strict";var r,i,s=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},a=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const l=t("../../stdlib"),u=o(t("./Attraction"));class c{constructor(t,e){if(r.set(this,void 0),i.set(this,void 0),c.isAttractResult(t))return t;this.x=t,this.y=e}static isAttractResult(t){return t instanceof c}get x(){return s(this,r)}set x(t){if(l.isset(t)&&!u.default.isAttraction(t))throw new TypeError(`Invalid attraction of x: ${t}`);a(this,r,t)}get y(){return s(this,i)}set y(t){if(l.isset(t)&&!u.default.isAttraction(t))throw new TypeError(`Invalid attraction of y: ${t}`);a(this,i,t)}get any(){var{x:t,y:e}=this;return l.isset(t)&&(!l.isset(e)||t.distance.rawVal<e.distance.rawVal)?t:e}clone(){var t;return new c(null===(t=this.x)||void 0===t?void 0:t.clone(),null===(t=this.y)||void 0===t?void 0:t.clone())}}n.default=c,r=new WeakMap,i=new WeakMap},{"../../stdlib":14,"./Attraction":5}],5:[function(t,e,n){"use strict";var r,i,s,a=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},o=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const u=t("../../stdlib"),c=l(t("./Distance"));class f extends c.default{constructor(t,e,n=new c.default){super(n.alignment,n.rawVal,u.isset(n.absVal)),r.set(this,void 0),i.set(this,void 0),s.set(this,void 0),f.isAttraction(t)?(a(this,r,t.source),a(this,i,t.target),a(this,s,t.distance)):(a(this,r,t),a(this,i,e),a(this,s,n))}static isAttraction(t){return t instanceof this}get source(){return o(this,r)}get target(){return o(this,i)}get distance(){return o(this,s)}clone(){return new f(this.source,this.target,this.distance)}}n.default=f,r=new WeakMap,i=new WeakMap,s=new WeakMap},{"../../stdlib":14,"./Distance":6}],6:[function(t,e,n){"use strict";var r,i,s,a=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},o=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};Object.defineProperty(n,"__esModule",{value:!0});const l=t("../../stdlib"),u=t("../Base");class c{constructor(t,...e){if(r.set(this,void 0),i.set(this,NaN),s.set(this,NaN),c.isDistance(t))return t;var n=t,[t=1/0,e=!0]=e;if(l.isset(n)&&!l.isinEnum(n,u.Alignments))throw new TypeError(`Invalid alignment: ${n}`);a(this,r,n),a(this,i,t),e&&a(this,s,Math.abs(t))}static isDistance(t){return t instanceof this}get alignment(){return o(this,r)}get rawVal(){return o(this,i)}get absVal(){return o(this,s)}clone(){return new c(this.alignment,this.rawVal,l.isset(this.absVal))}}n.default=c,r=new WeakMap,i=new WeakMap,s=new WeakMap},{"../../stdlib":14,"../Base":2}],7:[function(t,e,n){"use strict";var i,s,a,o,l=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},r=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const c=t("../../stdlib"),f=u(t("./AttractResult"));n.default=class{constructor(t,e,n=[],r){if(i.set(this,void 0),s.set(this,void 0),a.set(this,void 0),o.set(this,void 0),l(this,i,t),l(this,s,e),l(this,a,[]),l(this,o,f.default.isAttractResult(r)?r:new f.default),c.isset(n)){if(!c.isarray(n))throw new Error(`Invalid result list: ${n}`);n.forEach(t=>this.addResult(t))}}get source(){return r(this,i)}get target(){return r(this,s)}get results(){return r(this,a)}get best(){return r(this,o)}set best(t){l(this,o,t)}addResult(t){this.results.push(t)}},i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap},{"../../stdlib":14,"./AttractResult":4}],8:[function(t,e,y){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(y,"__esModule",{value:!0}),y.getOffsetOfAttractResult=y.calcMultiAttractions=y.cloneMultiAttractionsResult=y.calcAttraction=y.cloneAttractionResult=y.calcDistance=y.isinAttractRange=void 0;const A=t("../Base"),M=n(t("./Distance")),N=n(t("./Attraction")),o=n(t("./Summary")),_=t("../../Rect"),i=n(t("./AttractResult")),s=n(t("../../Rect/Point"));y.isinAttractRange=function(t,e,n,r,i){return r-=t,t=i+t,r<=e&&e<=t||r<=n&&n<=t};const l=()=>!0;y.calcDistance=function(t,e,n){switch(t){default:return 1/0;case A.Alignments.topToTop:return n.top-e.top;case A.Alignments.topToBottom:return n.bottom-e.top;case A.Alignments.rightToRight:return n.right-e.right;case A.Alignments.rightToLeft:return n.left-e.right;case A.Alignments.bottomToTop:return n.top-e.bottom;case A.Alignments.bottomToBottom:return n.bottom-e.bottom;case A.Alignments.leftToRight:return n.right-e.left;case A.Alignments.leftToLeft:return n.left-e.left;case A.Alignments.xCenterToXCenter:return.5*(n.right+n.left-(e.right+e.left));case A.Alignments.yCenterToYCenter:return.5*(n.top+n.bottom-(e.top+e.bottom))}};const u=t=>(null==t?void 0:t.absVal)||1/0,c=t=>(null==t?void 0:t.rawVal)||1/0;function r(t){return new o.default(t.source.clone(),t.target.clone(),t.results.map(t=>t.clone()),t.best.clone())}y.cloneAttractionResult=r;y.calcAttraction=function(t,e,{attractDistance:n=1/0,alignments:r=[],absDistance:d=!0,onJudgeDistance:g=l}={},m){const p=new _.Pack(t),v=new _.Pack(e),b=p.rectangle,T=v.rectangle,w=.33*n,E=d?u:c;n=new N.default(p,v,new M.default);return r.reduce((t,e)=>{var n=y.calcDistance(e,b,T),r=new M.default(e,n,d);if(g(r,v,p,m)){const{results:f,best:h}=t;var{x:i,y:n}=h,s=E(r),a=new N.default(p,v,r);if(f.push(a),A.ALIGNMENT_X.includes(e)){var o=E(i);do{if(o<s)break;if(s===o){var l=b.left-T.left;if(l>w){if(e!==A.Alignments.rightToRight)break}else if(l<-w&&e!==A.Alignments.leftToLeft)break;if(e!==A.Alignments.xCenterToXCenter)break}}while(h.x=a,0)}else if(A.ALIGNMENT_Y.includes(e)){var u=E(n);do{if(u<s)break;if(s===u){var c=b.top-T.top;if(c>w){if(e!==A.Alignments.bottomToBottom)break}else if(c<-w&&e!==A.Alignments.topToTop)break;if(e!==A.Alignments.yCenterToYCenter)break}}while(h.y=a,0)}}return t},new o.default(p,v,void 0,new i.default(n,n)))},y.cloneMultiAttractionsResult=function(t){return new o.default(t.source.clone(),t.target.map(t=>t.clone()),t.results.map(t=>r(t)),t.best.clone())};y.calcMultiAttractions=function(t,e=[],{attractDistance:n,alignments:r,absDistance:i,onJudgeDistance:s,onJudgeAttractSummary:h=l,bindAttraction:a}={},d){const g=new _.Pack(t),m={attractDistance:n,alignments:r,absDistance:i,onJudgeDistance:s},p=i?u:c;s=a?[_.toPack(a.target)]:[],i=a?[a]:[],a=null==a?void 0:a.best;return e.reduce((t,e)=>{var n=new _.Pack(e),r=y.calcAttraction(g,n,m,d),{best:i}=r,s=i.x,a=i.y,o=p(s),l=p(a);const{best:u}=t;var{x:e,y:i}=u,c=p(e),f=p(i);if(t.target.push(n),t.results.push(r),h(r,n,g,d)){for(;!(c<o)&&!(o===c&&f<l)&&(u.x=s,0););for(;!(f<l)&&!(l===f&&c<o)&&(u.y=a,0););}return t},new o.default(g,s,i,a))};y.getOffsetOfAttractResult=function(t){var{x:{alignment:e,rawVal:n}={},y:{alignment:r,rawVal:t}={}}=t;const i=new s.default(0,0);return A.ALIGNMENT_X.includes(e)&&(i.x=n),A.ALIGNMENT_Y.includes(r)&&(i.y=t),i}},{"../../Rect":13,"../../Rect/Point":11,"../Base":2,"./AttractResult":4,"./Attraction":5,"./Distance":6,"./Summary":7}],9:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.triggerEvent=n.removeEventListener=n.addEventListener=n.getEvtClientXY=n.generateAttractEventDetail=n.generateDragEventDetail=void 0;const i=r(t("../Rect/Point")),s=t("../stdlib"),a=r(t("./Base")),o=t("./calc");n.generateDragEventDetail=function(t,e){const{lastAttractSummary:n}=e;return{detail:{dragEvent:t,last:s.isset(n)?{offset:e.lastOffset.clone(),rectangle:e.self.rectangle.clone(),attraction:n.best.clone()}:void 0}}},n.generateAttractEventDetail=function(t,e=t.source.rectangle){return{detail:{attractSummary:o.cloneMultiAttractionsResult(t),nextStep:{offset:new i.default(e),rectangle:e.clone(),attraction:t.best.clone()}}}},n.getEvtClientXY=function(t){if(t instanceof MouseEvent)return new i.default(t.clientX,t.clientY);if(t instanceof TouchEvent){var e=t.touches[0];return new i.default(e.clientX,e.clientY)}throw new ReferenceError(`Invalid event: ${t}`)};n.addEventListener=function(e,t,n){return(s.isarray(t)?t:[t]).forEach(t=>{e.addEventListener(t,n)}),e};n.removeEventListener=function(e,t,n){return(s.isarray(t)?t:[t]).forEach(t=>{e.removeEventListener(t,n)}),e};n.triggerEvent=function(t,e,n){return t instanceof a.default&&t.triggerMagnetEvent(e,n)}},{"../Rect/Point":11,"../stdlib":14,"./Base":2,"./calc":8}],10:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.MagnetGroup=n.Magnet=void 0;var i=r(t("./Base"));n.MagnetGroup=i.default;t=r(t("./Block"));n.Magnet=t.default},{"./Base":2,"./Block":3}],11:[function(t,e,n){"use strict";var r,i,s=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},a=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const l=t("../stdlib"),u=o(t("./Rect"));class c{constructor(t=0,e=0){if(r.set(this,NaN),i.set(this,NaN),c.isPoint(t))return t.clone();u.default.isRect(t)?(this.x=t.x,this.y=t.y):(t=t,this.x=l.isnum(t)?t:0,this.y=l.isnum(e)?e:0)}static isPoint(t){return t instanceof this}get x(){return s(this,r)}set x(t){if(!l.isnum(t))throw new TypeError(`Invalid x: ${t}`);a(this,r,t)}get y(){return s(this,i)}set y(t){if(!l.isnum(t))throw new TypeError(`Invalid y: ${t}`);a(this,i,t)}clone(){return new c(this.x,this.y)}}n.default=c,r=new WeakMap,i=new WeakMap},{"../stdlib":14,"./Rect":12}],12:[function(t,e,n){"use strict";var g,m,p,v,b,T,w=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},r=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const E=t("../stdlib"),s=i(t("./Point")),a=1e-10;function y(t,e){return Math.abs(t-e)<=a}class A{constructor(t){if(g.set(this,NaN),m.set(this,NaN),p.set(this,NaN),v.set(this,NaN),b.set(this,NaN),T.set(this,NaN),A.isRect(t))return t.clone();var{x:e,y:n,top:r,right:i,bottom:s,left:a,width:o,height:t}=t;let l=0,u=0,c=0,f=0,h=0,d=0;if(E.isset(i)){if(!E.isnum(i))throw new TypeError(`Invalid right: ${i}`);u=i}if(E.isset(e)){if(!E.isnum(e))throw new TypeError(`Invalid x: ${e}`);if(E.isset(a)){if(!E.isnum(a))throw new TypeError(`Invalid left: ${a}`);if(!y(e,a))throw new RangeError(`x(${e}) <> left(${a})`)}f=e}else if(E.isset(a)){if(!E.isnum(a))throw new TypeError(`Invalid left: ${a}`);f=a}if(E.isset(u)){if(E.isset(f)&&f>u)throw new RangeError(`x|left(${f}) > right(${u})`)}else if(!E.isset(f))throw new ReferenceError("Must assign either x, left or right");if(E.isset(s)){if(!E.isnum(s))throw new TypeError(`Invalid bottom: ${s}`);c=s}if(E.isset(n)){if(!E.isnum(n))throw new TypeError(`Invalid y: ${n}`);if(E.isset(r)){if(!E.isnum(r))throw new TypeError(`Invalid top: ${r}`);if(!y(n,r))throw new RangeError(`y(${n}) <> top(${r})`)}l=n}else if(E.isset(r)){if(!E.isnum(r))throw new TypeError(`Invalid top: ${r}`);l=r}if(E.isset(l)){if(E.isset(c)&&l>c)throw new RangeError(`y|top(${l}) > bottom(${c})`)}else if(!E.isset(c))throw new ReferenceError("Must have either y, top or bottom");if(E.isset(o)){if(!E.isnum(o))throw new TypeError(`Invalid width: ${o}`);if(o<0)throw new RangeError(`width(${o}) < 0`);if(E.isset(u))if(E.isset(f)){if(!y(f+o,u))throw new RangeError(`right(${u}) - x|left(${f}) <> width(${o})`)}else f=u-o;else u=f+o;h=o}else{if(!E.isset(u)||!E.isset(f))throw new ReferenceError("Not enough info for width");h=u-f}if(E.isset(t)){if(!E.isnum(t))throw new TypeError(`Invalid height: ${t}`);if(t<0)throw new RangeError(`height(${t}) < 0`);if(E.isset(l))if(E.isset(c)){if(!y(l+t,c))throw new RangeError(`bottom(${c}) - y|top(${l}) <> height(${t})`)}else c=l+t;else l=c-t;d=t}else{if(!E.isset(l)||!E.isset(c))throw new ReferenceError("Not enough info for height");d=c-l}w(this,g,l),w(this,m,u),w(this,p,c),w(this,v,f),w(this,b,h),w(this,T,d)}static isRect(t){return t instanceof this}get top(){return r(this,g)}get right(){return r(this,m)}get bottom(){return r(this,p)}get left(){return r(this,v)}get width(){return r(this,b)}get height(){return r(this,T)}get x(){return this.left}get y(){return this.top}offsetX(t=0){if(!E.isnum(t))throw new TypeError(`Invalid x: ${t}`);return w(this,v,this.left+t),w(this,m,this.right+t),this}offsetY(t=0){if(!E.isnum(t))throw new TypeError(`Invalid y: ${t}`);return w(this,g,this.top+t),w(this,p,this.bottom+t),this}offset(t,e){return s.default.isPoint(t)?(this.offsetX(t.x),this.offsetY(t.y)):(this.offsetX(t),this.offsetY(e)),this}moveToX(t=this.left){if(!E.isnum(t))throw new TypeError(`Invalid x: ${t}`);return this.offsetX(t-this.left),this}moveToY(t=this.top){if(!E.isnum(t))throw new TypeError(`Invalid y: ${t}`);return this.offsetY(t-this.top),this}moveTo(t,e){return s.default.isPoint(t)?(this.moveToX(t.x),this.moveToY(t.y)):(this.moveToX(t),this.moveToY(e)),this}clone(){return new A({top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height})}}n.default=A,g=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,b=new WeakMap,T=new WeakMap},{"../stdlib":14,"./Point":11}],13:[function(t,e,n){"use strict";var r,i,s=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},a=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.toPack=n.toRect=n.Pack=void 0;const h=t("../stdlib"),d=o(t("./Rect"));class g{constructor(t,e=!1){if(r.set(this,void 0),i.set(this,void 0),g.isPack(t)){const{rectangle:n}=t;s(this,r,e?n.clone():n),s(this,i,t.raw)}else s(this,r,l(t)),s(this,i,t)}static isPack(t){return t instanceof this}get raw(){return a(this,i)}get rectangle(){return a(this,r)}clone(){return new g(this,!0)}}function l(t){if(!h.isset(t))throw new ReferenceError("Not assign source");if(d.default.isRect(t))return t;if(g.isPack(t))return t.rectangle;if(t instanceof Window||t instanceof Document){var e=window.innerWidth,n=window.innerHeight;return new d.default({x:0,y:0,top:0,right:e,bottom:n,left:0,width:e,height:n})}if(t instanceof Element){var{borderTopWidth:r,borderRightWidth:i,borderBottomWidth:s,borderLeftWidth:a,boxSizing:o}=h.getStyle(t),{top:l,right:u,bottom:c,left:f,width:e,height:n}=t.getBoundingClientRect(),o=!/\bborder-box\b/i.test(o),r=o?h.tonum(r):0,i=o?h.tonum(i):0,s=o?h.tonum(s):0,a=o?h.tonum(a):0,e=e-i-a,n=n-r-s;return t===document.body?new d.default({top:r,right:e,bottom:n,left:a,width:e,height:n}):new d.default({top:l+r,right:u-i,bottom:c-s,left:f+a,width:e,height:n})}return new d.default(t)}n.Pack=g,r=new WeakMap,i=new WeakMap,n.toRect=l,n.toPack=function(t){return g.isPack(t)?t:new g(t)}},{"../stdlib":14,"./Rect":12}],14:[function(t,e,n){"use strict";function r(t){return void 0!==t}function i(t){return"string"==typeof t||r(t)&&t instanceof String}function s(t){return!Number.isNaN(t)}function a(t){return s(t)&&t===(0|t)}function o(t){return"object"==typeof t}function l(t){return o(t)&&a(t.length)&&0<=t.length}function u(t){return Object.keys(t)}function c(n,r,t){return u(n).reduce((t,e)=>r(t,n[e],e,n),t)}Object.defineProperty(n,"__esModule",{value:!0}),n.isinEnum=n.getStyle=n.objMap=n.objReduce=n.objValues=n.objKeys=n.toarray=n.arrayable=n.isarray=n.isobj=n.isfunc=n.toint=n.isint=n.tonum=n.isnum=n.tostr=n.isstr=n.isnull=n.isset=void 0,n.isset=r,n.isnull=function(t){return null===t},n.isstr=i,n.tostr=function(t){return`${t}`},n.isnum=s,n.tonum=function(t){return parseFloat(t)},n.isint=a,n.toint=function(t){return s(t)?0|t:parseInt(t,10)},n.isfunc=function(t){return"function"==typeof t},n.isobj=o,n.isarray=function(t){return Array.isArray(t)},n.arrayable=l,n.toarray=function(t){return i(t)||l(t)?[...t]:[t]},n.objKeys=u,n.objValues=function(e){return u(e).map(t=>e[t])},n.objReduce=c,n.objMap=function(r,i,s=this){return c(r,(t,e,n)=>Object.assign(Object.assign({},t),{[n]:i.call(s,e,n,r)}),{})},n.getStyle=function(t){return(null==t?void 0:t.currentStyle)||(null===window||void 0===window?void 0:window.getComputedStyle(t))||(null==t?void 0:t.style)},n.isinEnum=function(t,e){return o(e)&&t in e}},{}]},{},[1]);