!function r(i,s,o){function a(e,t){if(!s[e]){if(!i[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=s[e]={exports:{}},i[e][0].call(n.exports,function(t){return a(i[e][1][t]||t)},n,n.exports,r,i,s,o)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<o.length;t++)a(o[t]);return a}({1:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.MagnetGroup=n.MagnetBase=void 0;const i=t("./libs/Magnet");Object.defineProperty(n,"MagnetGroup",{enumerable:!0,get:function(){return i.MagnetGroup}});t=r(t("./libs/Magnet/Base"));n.MagnetBase=t.default,Promise.all([{elem:i.Magnet,nodeName:"magnet-block"},{elem:i.MagnetGroup,nodeName:"magnet-group"}].map(({elem:t,nodeName:e})=>customElements.get(e)?Promise.resolve():(customElements.define(e,t),customElements.whenDefined(e)))).then(()=>{}),n.default=i.Magnet},{"./libs/Magnet":10,"./libs/Magnet/Base":2}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Events=n.CrossPrevents=n.AlignToParents=n.AlignTos=n.ALIGNMENT_Y=n.ALIGNMENT_X=n.Alignments=n.Attributes=void 0;const r=t("../stdlib");var i,s,o,a,l,u;function c(t){t=r.objMap(t,t=>({value:t,enumerable:!0}));return Object.defineProperties({},t)}(u=i=n.Attributes||(n.Attributes={})).disabled="mg-disabled",u.group="mg-group",u.unattractable="mg-unattractable",u.unmovable="mg-unmovable",u.attractDistance="mg-attract-distance",u.alignTo="mg-align-to",u.alignToParent="mg-align-to-parent",u.crossPrevent="mg-cross-prevent",(a=s=n.Alignments||(n.Alignments={})).topToTop="topToTop",a.topToBottom="topToBottom",a.rightToRight="rightToRight",a.rightToLeft="rightToLeft",a.bottomToTop="bottomToTop",a.bottomToBottom="bottomToBottom",a.leftToRight="leftToRight",a.leftToLeft="leftToLeft",a.xCenterToXCenter="xCenterToXCenter",a.yCenterToYCenter="yCenterToYCenter",n.ALIGNMENT_X=[s.rightToRight,s.rightToLeft,s.leftToRight,s.leftToLeft,s.xCenterToXCenter],n.ALIGNMENT_Y=[s.topToTop,s.topToBottom,s.bottomToTop,s.bottomToBottom,s.yCenterToYCenter],(l=o=n.AlignTos||(n.AlignTos={})).outer="outer",l.inner="inner",l.center="center",l.outerline="outerline",(u=t=n.AlignToParents||(n.AlignToParents={})).inner="inner",u.center="center",(a=n.CrossPrevents||(n.CrossPrevents={})).parent="parent",(u=l=n.Events||(n.Events={})).start="mg-start",u.move="mg-move",u.end="mg-end",u.attract="mg-attract",u.attractmove="mg-attractmove",u.unattract="mg-unattract",u.attracted="mg-attracted",u.attractedmove="mg-attractedmove",u.unattracted="mg-unattracted";const f=/[|;,\s]/;function h(t,e){return(r.isstr(t)?t.split(f):r.toarray(t).filter(r.isstr)).filter(t=>t in e).join("|")}function d(t,e,n){return r.isstr(t)?t.split(f).filter(t=>t in e):n}const g=[o.outer,o.inner,o.center,o.outerline],m=[],p=[],v=document.createElement("template");v.innerHTML=`
<style>
  :host {
    position: relative;
    display: inline-block;
  }
</style>
<slot>
</slot>
`;class b extends HTMLElement{constructor(){var t;super(),this.attachShadow({mode:"open"}),null!==(t=this.shadowRoot)&&void 0!==t&&t.appendChild(v.content.cloneNode(!0))}static getAlignmentsOfAlignTo(t=[]){const e=[];return t.includes(this.ALIGN_TO.outer)&&(e.push(this.ALIGNMENT.topToBottom),e.push(this.ALIGNMENT.rightToLeft),e.push(this.ALIGNMENT.bottomToTop),e.push(this.ALIGNMENT.leftToRight)),t.includes(this.ALIGN_TO.inner)&&(e.push(this.ALIGNMENT.topToTop),e.push(this.ALIGNMENT.rightToRight),e.push(this.ALIGNMENT.bottomToBottom),e.push(this.ALIGNMENT.leftToLeft)),t.includes(this.ALIGN_TO.center)&&(e.push(this.ALIGNMENT.xCenterToXCenter),e.push(this.ALIGNMENT.yCenterToYCenter)),e}set disabled(t){t?this.setAttribute(i.disabled,""):this.removeAttribute(i.disabled)}get disabled(){return r.isstr(this.traceMagnetAttributeValue(i.disabled))}set group(t){r.isstr(t)?this.setAttribute(i.group,t):this.removeAttribute(i.group)}get group(){return this.traceMagnetAttributeValue(i.group)}get groupNode(){let t=this.parentElement;for(;t;){if(t instanceof b)return t;t=t.parentElement}return null}set unattractable(t){t?this.setAttribute(i.unattractable,""):this.removeAttribute(i.unattractable)}get unattractable(){return r.isstr(this.traceMagnetAttributeValue(i.unattractable))}set unmovable(t){t?this.setAttribute(i.unmovable,""):this.removeAttribute(i.unmovable)}get unmovable(){return r.isstr(this.traceMagnetAttributeValue(i.unmovable))}set attractDistance(t){r.isnum(t)&&this.setAttribute(i.attractDistance,r.tostr(t))}get attractDistance(){var t=this.traceMagnetAttributeValue(i.attractDistance),t=r.tonum(r.isstr(t)?t:0);return Number.NaN===t?0:t}set alignTo(t){t=h(t,b.ALIGN_TO);this.setAttribute(i.alignTo,t)}get alignTo(){return d(this.traceMagnetAttributeValue(i.alignTo),b.ALIGN_TO,g)}set alignToParent(t){t=h(t,b.ALIGN_TO_PARENT);this.setAttribute(i.alignToParent,t)}get alignToParent(){return d(this.traceMagnetAttributeValue(i.alignToParent),b.ALIGN_TO_PARENT,m)}set crossPrevent(t){t=h(t,b.CROSS_PREVENT);this.setAttribute(i.crossPrevent,t)}get crossPrevent(){return d(this.traceMagnetAttributeValue(i.crossPrevent),b.CROSS_PREVENT,p)}traceMagnetAttributeValue(t){var e=this.getAttribute(t);if(r.isstr(e))return e;const{groupNode:n}=this;return n?n.traceMagnetAttributeValue(t):null}triggerMagnetEvent(t,{detail:e,composed:n=!1,cancelable:r=!0,bubbles:i=!1}={}){i=new CustomEvent(t,{detail:e,composed:n,cancelable:r,bubbles:i});return!this.dispatchEvent(i)}}(n.default=b).ALIGNMENT=c({topToTop:s.topToTop,topToBottom:s.topToBottom,rightToRight:s.rightToRight,rightToLeft:s.rightToLeft,bottomToTop:s.bottomToTop,bottomToBottom:s.bottomToBottom,leftToRight:s.leftToRight,leftToLeft:s.leftToLeft,xCenterToXCenter:s.xCenterToXCenter,yCenterToYCenter:s.yCenterToYCenter}),b.ALIGN_TO=c({outer:o.outer,inner:o.inner,center:o.center,outerline:o.outerline}),b.ALIGN_TO_PARENT=c({inner:t.inner,center:t.center}),b.CROSS_PREVENT=c({parent:a.parent}),b.EVENT=c({start:l.start,move:l.move,end:l.end,attract:l.attract,attractmove:l.attractmove,unattract:l.unattract,attracted:l.attracted,attractedmove:l.attractedmove,unattracted:l.unattracted})},{"../stdlib":14}],3:[function(t,e,n){"use strict";var E,r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},o=this&&this.__rest||function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.Styles=void 0;const A=t("../Rect"),$=a(t("../Rect/Point")),S=a(t("../Rect/Rect")),M=t("../stdlib"),G=s(t("./Base")),V=t("./calc"),B=t("./handler"),l=["mousedown","touchstart"],_=["mousemove","touchmove"],P=["mouseup","touchend"];(t=E=n.Styles||(n.Styles={})).offsetX="--mg-offset-x",t.offsetY="--mg-offset-y";class X extends G.default{constructor(){super(),this.judgeDistance=t=>t.absVal<=this.attractDistance,this.judgeAttractSummary=t=>M.isset(t.best.any),this.judgeParentDistance=(...t)=>this.judgeDistance(...t),this.attributeChangedCallback(G.Attributes.disabled)}static calcAttraction(t,e,n={}){var{alignments:r=M.objValues(this.ALIGNMENT),absDistance:i=!0}=n,n=o(n,["alignments","absDistance"]);return V.calcAttraction(t,e,Object.assign(Object.assign({},n),{alignments:r,absDistance:i}))}static calcMultiAttractions(t,e=[],n={}){var{alignments:r=M.objValues(this.ALIGNMENT),absDistance:i=!0}=n,n=o(n,["alignments","absDistance"]);return V.calcMultiAttractions(t,e,Object.assign(Object.assign({},n),{alignments:r,absDistance:i}))}attributeChangedCallback(t){switch(t){case G.Attributes.disabled:this.disabled?B.removeEventListener(this,l,this.handleMagnetDragStart):this.unmovable||B.addEventListener(this,l,this.handleMagnetDragStart);break;case G.Attributes.unmovable:this.unmovable?B.removeEventListener(this,l,this.handleMagnetDragStart):this.disabled||B.addEventListener(this,l,this.handleMagnetDragStart)}}getMagnetTargets(){var{group:t}=this,e=`${M.isstr(t)?`[${G.Attributes.group}="${t}"]`:""}${`:not([${G.Attributes.disabled}])`}${`:not([${G.Attributes.unattractable}])`}`,n=`${this.localName}${e}`,t=document.querySelectorAll(n),n=document.querySelectorAll(`${(new G.default).localName}${e} ${n}`);return M.toarray(t||[]).concat(M.toarray(n||[])).filter((t,e,n)=>t!==this&&n.indexOf(t)===e)}calcAttraction(t,e){return X.calcAttraction(this,t,e)}calcMultiAttractions(t,e){return X.calcMultiAttractions(this,t,e)}resetMagnetOffset(){this.style.removeProperty(E.offsetX),this.style.removeProperty(E.offsetY),this.style.removeProperty("transform")}handleMagnetOffset(t,e){$.default.isPoint(t)&&(this.style.setProperty(E.offsetX,`${t.x}px`),this.style.setProperty(E.offsetY,`${t.y}px`)),this.style.setProperty(E.offsetX,`${t}px`),this.style.setProperty(E.offsetY,`${e}px`)}handleMagnetDragStart(t){if(!this.disabled&&!this.unmovable){var{position:n,zIndex:r,transform:i}=M.getStyle(this);const{disabled:c,unattractable:f,unmovable:h,group:d,alignTo:g,alignToParent:m,crossPrevent:p,attractDistance:v,parentElement:b}=this;var s=new $.default(M.tonum(this.style.getPropertyValue(E.offsetX)||0),M.tonum(this.style.getPropertyValue(E.offsetY)||0)),o=new A.Pack(this),a=M.isnull(b)?void 0:new A.Pack(b);const T=null==a?void 0:a.rectangle;var l=p.includes(X.CROSS_PREVENT.parent),u=l&&T?(t,e,n)=>{var{rawVal:r,absVal:i}=t,{rectangle:s}=n;if(i>this.attractDistance)return!1;switch(t.alignment){default:return!0;case G.Alignments.topToTop:case G.Alignments.topToBottom:return T.top<=s.top+r;case G.Alignments.rightToRight:case G.Alignments.rightToLeft:return T.right>=s.right+r;case G.Alignments.bottomToTop:case G.Alignments.bottomToBottom:return T.bottom>=s.bottom+r;case G.Alignments.leftToRight:case G.Alignments.leftToLeft:return T.left<=s.left+r;case G.Alignments.xCenterToXCenter:return T.right>=s.right+r&&T.left<=s.left+r;case G.Alignments.yCenterToYCenter:return T.top<=s.top+r&&T.bottom>=s.bottom+r}}:this.judgeDistance.bind(this);let e={attractDistance:v,alignTo:g,alignToOuter:g.includes(X.ALIGN_TO.outer),alignToInner:g.includes(X.ALIGN_TO.inner),alignToCenter:g.includes(X.ALIGN_TO.center),alignToOuterline:g.includes(X.ALIGN_TO.outerline),alignToParent:m,alignToParentInner:m.includes(X.ALIGN_TO_PARENT.inner),alignToParentCenter:m.includes(X.ALIGN_TO_PARENT.center),crossPrevent:p,crossPreventParent:l,alignments:X.getAlignmentsOfAlignTo(g),parentAlignments:X.getAlignmentsOfAlignTo(m),onJudgeDistance:u,onJudgeAttractSummary:this.judgeAttractSummary.bind(this),onJudgeParentDistance:this.judgeParentDistance.bind(this),disabled:c,group:d,unattractable:f,unmovable:h,parent:a,targets:this.getMagnetTargets().map(t=>new A.Pack(t)),self:o,originStyle:{position:n,zIndex:r,transform:i},startXY:B.getEvtClientXY(t),lastOffset:s};if(!this.triggerMagnetEvent(X.EVENT.start,B.generateDragEventDetail(t,e))){const w=t=>{this.triggerMagnetEvent(X.EVENT.move,B.generateDragEventDetail(t,e))||(e=this.handleMagnetDragMove(t,e))},y=t=>{this.triggerMagnetEvent(X.EVENT.end,B.generateDragEventDetail(t,e))||(this.handleMagnetDragEnd(t,e),B.removeEventListener(window,_,w),B.removeEventListener(window,P,y))};switch(t.preventDefault(),t.stopImmediatePropagation(),n){case"relative":case"fixed":case"absolute":break;default:this.style.setProperty("position","relative")}this.style.setProperty("z-index",M.tostr(M.toint(Date.now()/1e3))),this.style.setProperty("transform",`translate(var(${E.offsetX}), var(${E.offsetY}))`,"important"),B.addEventListener(window,_,w),B.addEventListener(window,P,y),e=this.handleMagnetDragMove(t,e)}}}handleMagnetDragMove(t,e){var{crossPreventParent:n,alignments:r,parentAlignments:i,onJudgeDistance:s,onJudgeAttractSummary:o,onJudgeParentDistance:a,unattractable:l,parent:u,targets:c,self:{rectangle:f},startXY:h,lastOffset:d,lastAttractSummary:g}=e,{rectangle:m}=u||{},{x:p,y:v,width:b,height:T}=f,t=B.getEvtClientXY(t),h=new $.default(t.x-h.x,t.y-h.y),h=new S.default(f).offset(h);const w=new S.default(h);n&&m&&(w.left<m.left?w.moveToX(m.left):w.left+b>m.right&&w.moveToX(m.right-b),w.top<m.top?w.moveToY(m.top):w.top+T>m.bottom&&w.moveToY(m.bottom-T));const y=new S.default(w);let E;do{if(l)break;E=X.calcMultiAttractions(w,c,{alignments:r,onJudgeDistance:s,onJudgeAttractSummary:o,bindAttraction:0<i.length&&u?X.calcAttraction(w,u,{alignments:i,onJudgeDistance:a}):void 0});var{best:A}=E,{x:M,y:_}=A,P=null===(O=null==g?void 0:g.best)||void 0===O?void 0:O.x,N=null===(x=null==g?void 0:g.best)||void 0===x?void 0:x.y;const L=null==P?void 0:P.target,I=null==N?void 0:N.target,k=null==M?void 0:M.target,C=null==_?void 0:_.target;var R=L!==k,D=I!==C;const j=V.getOffsetOfAttractResult(A);var O=new S.default(w).offset(j),x=B.generateAttractEventDetail(E,O);if(!R||!D){if(this.triggerMagnetEvent(X.EVENT.attractmove,x))break;if(!R&&k instanceof G.default&&k.triggerMagnetEvent(X.EVENT.attractedmove,x))break;if(!D&&C instanceof G.default&&C.triggerMagnetEvent(X.EVENT.attractedmove,x))break}if((L||I)&&(A=L&&R,O=I&&D,(A||O)&&(this.triggerMagnetEvent(X.EVENT.unattract,x),A&&L instanceof G.default&&L.triggerMagnetEvent(X.EVENT.unattracted,x),O&&I instanceof G.default&&I.triggerMagnetEvent(X.EVENT.unattracted,x))),k||C){P=null==P?void 0:P.alignment,N=null==N?void 0:N.alignment,M=null==M?void 0:M.alignment,_=null==_?void 0:_.alignment,M=k&&(R||P!==M),_=C&&(D||N!==_);if(M||_){if(this.triggerMagnetEvent(X.EVENT.attract,x))break;M&&k instanceof G.default&&k.triggerMagnetEvent(X.EVENT.attracted,x)&&(j.x=0),_&&C instanceof G.default&&C.triggerMagnetEvent(X.EVENT.attracted,x)&&(j.y=0)}}y.offset(j)}while(0);p=y.x-p+d.x,d=y.y-v+d.y;return this.handleMagnetOffset(p,d),Object.assign(Object.assign({},e),{lastAttractSummary:E})}handleMagnetDragEnd(t,e){var{originStyle:{position:n,zIndex:e}}=e;M.isset(n)&&this.style.setProperty("position",n),M.isset(e)&&this.style.setProperty("z-index",e)}}n.default=X,X.observedAttributes=[G.Attributes.disabled,G.Attributes.unmovable]},{"../Rect":13,"../Rect/Point":11,"../Rect/Rect":12,"../stdlib":14,"./Base":2,"./calc":8,"./handler":9}],4:[function(t,e,n){"use strict";var r,i,s=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},o=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const l=t("../../stdlib"),u=a(t("./Attraction"));class c{constructor(t,e){if(r.set(this,void 0),i.set(this,void 0),c.isAttractResult(t))return t;this.x=t,this.y=e}static isAttractResult(t){return t instanceof c}get x(){return s(this,r)}set x(t){if(l.isset(t)&&!u.default.isAttraction(t))throw new TypeError(`Invalid attraction of x: ${t}`);o(this,r,t)}get y(){return s(this,i)}set y(t){if(l.isset(t)&&!u.default.isAttraction(t))throw new TypeError(`Invalid attraction of y: ${t}`);o(this,i,t)}get any(){var{x:t,y:e}=this;return l.isset(t)&&(!l.isset(e)||t.distance.rawVal<e.distance.rawVal)?t:e}clone(){var t;return new c(null===(t=this.x)||void 0===t?void 0:t.clone(),null===(t=this.y)||void 0===t?void 0:t.clone())}}n.default=c,r=new WeakMap,i=new WeakMap},{"../../stdlib":14,"./Attraction":5}],5:[function(t,e,n){"use strict";var r,i,s,o=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},a=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const u=t("../../stdlib"),c=l(t("./Distance"));class f extends c.default{constructor(t,e,n=new c.default){super(n.alignment,n.rawVal,u.isset(n.absVal)),r.set(this,void 0),i.set(this,void 0),s.set(this,void 0),f.isAttraction(t)?(o(this,r,t.source),o(this,i,t.target),o(this,s,t.distance)):(o(this,r,t),o(this,i,e),o(this,s,n))}static isAttraction(t){return t instanceof this}get source(){return a(this,r)}get target(){return a(this,i)}get distance(){return a(this,s)}clone(){return new f(this.source,this.target,this.distance)}}n.default=f,r=new WeakMap,i=new WeakMap,s=new WeakMap},{"../../stdlib":14,"./Distance":6}],6:[function(t,e,n){"use strict";var r,i,s,o=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},a=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};Object.defineProperty(n,"__esModule",{value:!0});const l=t("../../stdlib"),u=t("../Base");class c{constructor(t,...e){if(r.set(this,void 0),i.set(this,NaN),s.set(this,NaN),c.isDistance(t))return t;var n=t,[t=1/0,e=!0]=e;if(l.isset(n)&&!l.isinEnum(n,u.Alignments))throw new TypeError(`Invalid alignment: ${n}`);o(this,r,n),o(this,i,t),e&&o(this,s,Math.abs(t))}static isDistance(t){return t instanceof this}get alignment(){return a(this,r)}get rawVal(){return a(this,i)}get absVal(){return a(this,s)}clone(){return new c(this.alignment,this.rawVal,l.isset(this.absVal))}}n.default=c,r=new WeakMap,i=new WeakMap,s=new WeakMap},{"../../stdlib":14,"../Base":2}],7:[function(t,e,n){"use strict";var i,s,o,a,l=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},r=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const c=t("../../stdlib"),f=u(t("./AttractResult"));n.default=class{constructor(t,e,n=[],r){if(i.set(this,void 0),s.set(this,void 0),o.set(this,void 0),a.set(this,void 0),l(this,i,t),l(this,s,e),l(this,o,[]),l(this,a,f.default.isAttractResult(r)?r:new f.default),c.isset(n)){if(!c.isarray(n))throw new Error(`Invalid result list: ${n}`);n.forEach(t=>this.addResult(t))}}get source(){return r(this,i)}get target(){return r(this,s)}get results(){return r(this,o)}get best(){return r(this,a)}set best(t){l(this,a,t)}addResult(t){this.results.push(t)}},i=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap},{"../../stdlib":14,"./AttractResult":4}],8:[function(t,e,y){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(y,"__esModule",{value:!0}),y.getOffsetOfAttractResult=y.calcMultiAttractions=y.cloneMultiAttractionsResult=y.calcAttraction=y.cloneAttractionResult=y.calcDistance=void 0;const E=t("../Base"),A=n(t("./Distance")),M=n(t("./Attraction")),a=n(t("./Summary")),_=t("../../Rect"),i=n(t("./AttractResult")),s=n(t("../../Rect/Point")),l=()=>!0;y.calcDistance=function(t,e,n){switch(t){default:return 1/0;case E.Alignments.topToTop:return n.top-e.top;case E.Alignments.topToBottom:return n.bottom-e.top;case E.Alignments.rightToRight:return n.right-e.right;case E.Alignments.rightToLeft:return n.left-e.right;case E.Alignments.bottomToTop:return n.top-e.bottom;case E.Alignments.bottomToBottom:return n.bottom-e.bottom;case E.Alignments.leftToRight:return n.right-e.left;case E.Alignments.leftToLeft:return n.left-e.left;case E.Alignments.xCenterToXCenter:return.5*(n.right+n.left-(e.right+e.left));case E.Alignments.yCenterToYCenter:return.5*(n.top+n.bottom-(e.top+e.bottom))}};const u=t=>(null==t?void 0:t.absVal)||1/0,c=t=>(null==t?void 0:t.rawVal)||1/0;function r(t){return new a.default(t.source.clone(),t.target.clone(),t.results.map(t=>t.clone()),t.best.clone())}y.cloneAttractionResult=r;y.calcAttraction=function(t,e,{attractDistance:n=1/0,alignments:r=[],absDistance:d=!0,onJudgeDistance:g=l}={}){const m=new _.Pack(t),p=new _.Pack(e),v=m.rectangle,b=p.rectangle,T=.33*n,w=d?u:c;n=new M.default(m,p,new A.default);return r.reduce((t,e)=>{var n=y.calcDistance(e,v,b),r=new A.default(e,n,d);if(g(r,p,m)){const{results:f,best:h}=t;var{x:i,y:n}=h,s=w(r),o=new M.default(m,p,r);if(f.push(o),E.ALIGNMENT_X.includes(e)){var a=w(i);do{if(a<s)break;if(s===a){var l=v.left-b.left;if(l>T){if(e!==E.Alignments.rightToRight)break}else if(l<-T&&e!==E.Alignments.leftToLeft)break;if(e!==E.Alignments.xCenterToXCenter)break}}while(h.x=o,0)}else if(E.ALIGNMENT_Y.includes(e)){var u=w(n);do{if(u<s)break;if(s===u){var c=v.top-b.top;if(c>T){if(e!==E.Alignments.bottomToBottom)break}else if(c<-T&&e!==E.Alignments.topToTop)break;if(e!==E.Alignments.yCenterToYCenter)break}}while(h.y=o,0)}}return t},new a.default(m,p,void 0,new i.default(n,n)))},y.cloneMultiAttractionsResult=function(t){return new a.default(t.source.clone(),t.target.map(t=>t.clone()),t.results.map(t=>r(t)),t.best.clone())};y.calcMultiAttractions=function(t,e=[],{attractDistance:n,alignments:r,absDistance:i,onJudgeDistance:s,onJudgeAttractSummary:h=l,bindAttraction:o}={}){const d=new _.Pack(t),g={attractDistance:n,alignments:r,absDistance:i,onJudgeDistance:s},m=i?u:c;s=o?[_.toPack(o.target)]:[],i=o?[o]:[],o=null==o?void 0:o.best;return e.reduce((t,e)=>{var n=new _.Pack(e),r=y.calcAttraction(d,n,g),{best:i}=r,s=i.x,o=i.y,a=m(s),l=m(o);const{best:u}=t;var{x:e,y:i}=u,c=m(e),f=m(i);if(t.target.push(n),t.results.push(r),h(r,n,d)){for(;!(c<a)&&!(a===c&&f<l)&&(u.x=s,0););for(;!(f<l)&&!(l===f&&c<a)&&(u.y=o,0););}return t},new a.default(d,s,i,o))};y.getOffsetOfAttractResult=function(t){var{x:{alignment:e,rawVal:n}={},y:{alignment:r,rawVal:t}={}}=t;const i=new s.default(0,0);return E.ALIGNMENT_X.includes(e)&&(i.x=n),E.ALIGNMENT_Y.includes(r)&&(i.y=t),i}},{"../../Rect":13,"../../Rect/Point":11,"../Base":2,"./AttractResult":4,"./Attraction":5,"./Distance":6,"./Summary":7}],9:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.triggerEvent=n.removeEventListener=n.addEventListener=n.getEvtClientXY=n.generateAttractEventDetail=n.generateDragEventDetail=void 0;const i=r(t("../Rect/Point")),s=t("../stdlib"),o=r(t("./Base")),a=t("./calc");n.generateDragEventDetail=function(t,e){const{lastAttractSummary:n}=e;return{detail:{dragEvent:t,last:s.isset(n)?{offset:e.lastOffset.clone(),rectangle:e.self.rectangle.clone(),attraction:n.best.clone()}:void 0}}},n.generateAttractEventDetail=function(t,e=t.source.rectangle){return{detail:{attractSummary:a.cloneMultiAttractionsResult(t),nextStep:{offset:new i.default(e),rectangle:e.clone(),attraction:t.best.clone()}}}},n.getEvtClientXY=function(t){if(t instanceof MouseEvent)return new i.default(t.clientX,t.clientY);if(t instanceof TouchEvent){var e=t.touches[0];return new i.default(e.clientX,e.clientY)}throw new ReferenceError(`Invalid event: ${t}`)};n.addEventListener=function(e,t,n){return(s.isarray(t)?t:[t]).forEach(t=>{e.addEventListener(t,n)}),e};n.removeEventListener=function(e,t,n){return(s.isarray(t)?t:[t]).forEach(t=>{e.removeEventListener(t,n)}),e};n.triggerEvent=function(t,e,n){return t instanceof o.default&&t.triggerMagnetEvent(e,n)}},{"../Rect/Point":11,"../stdlib":14,"./Base":2,"./calc":8}],10:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.MagnetGroup=n.Magnet=void 0;var i=r(t("./Base"));n.MagnetGroup=i.default;t=r(t("./Block"));n.Magnet=t.default},{"./Base":2,"./Block":3}],11:[function(t,e,n){"use strict";var r,i,s=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},o=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const l=t("../stdlib"),u=a(t("./Rect"));class c{constructor(t=0,e=0){if(r.set(this,NaN),i.set(this,NaN),c.isPoint(t))return t.clone();u.default.isRect(t)?(this.x=t.x,this.y=t.y):(t=t,this.x=l.isnum(t)?t:0,this.y=l.isnum(e)?e:0)}static isPoint(t){return t instanceof this}get x(){return s(this,r)}set x(t){if(!l.isnum(t))throw new TypeError(`Invalid x: ${t}`);o(this,r,t)}get y(){return s(this,i)}set y(t){if(!l.isnum(t))throw new TypeError(`Invalid y: ${t}`);o(this,i,t)}clone(){return new c(this.x,this.y)}}n.default=c,r=new WeakMap,i=new WeakMap},{"../stdlib":14,"./Rect":12}],12:[function(t,e,n){"use strict";var g,m,p,v,b,T,w=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},r=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const y=t("../stdlib"),s=i(t("./Point")),o=1e-10;function E(t,e){return Math.abs(t-e)<=o}class A{constructor(t){if(g.set(this,NaN),m.set(this,NaN),p.set(this,NaN),v.set(this,NaN),b.set(this,NaN),T.set(this,NaN),A.isRect(t))return t.clone();var{x:e,y:n,top:r,right:i,bottom:s,left:o,width:a,height:t}=t;let l=0,u=0,c=0,f=0,h=0,d=0;if(y.isset(i)){if(!y.isnum(i))throw new TypeError(`Invalid right: ${i}`);u=i}if(y.isset(e)){if(!y.isnum(e))throw new TypeError(`Invalid x: ${e}`);if(y.isset(o)){if(!y.isnum(o))throw new TypeError(`Invalid left: ${o}`);if(!E(e,o))throw new RangeError(`x(${e}) <> left(${o})`)}f=e}else if(y.isset(o)){if(!y.isnum(o))throw new TypeError(`Invalid left: ${o}`);f=o}if(y.isset(u)){if(y.isset(f)&&f>u)throw new RangeError(`x|left(${f}) > right(${u})`)}else if(!y.isset(f))throw new ReferenceError("Must assign either x, left or right");if(y.isset(s)){if(!y.isnum(s))throw new TypeError(`Invalid bottom: ${s}`);c=s}if(y.isset(n)){if(!y.isnum(n))throw new TypeError(`Invalid y: ${n}`);if(y.isset(r)){if(!y.isnum(r))throw new TypeError(`Invalid top: ${r}`);if(!E(n,r))throw new RangeError(`y(${n}) <> top(${r})`)}l=n}else if(y.isset(r)){if(!y.isnum(r))throw new TypeError(`Invalid top: ${r}`);l=r}if(y.isset(l)){if(y.isset(c)&&l>c)throw new RangeError(`y|top(${l}) > bottom(${c})`)}else if(!y.isset(c))throw new ReferenceError("Must have either y, top or bottom");if(y.isset(a)){if(!y.isnum(a))throw new TypeError(`Invalid width: ${a}`);if(a<0)throw new RangeError(`width(${a}) < 0`);if(y.isset(u))if(y.isset(f)){if(!E(f+a,u))throw new RangeError(`right(${u}) - x|left(${f}) <> width(${a})`)}else f=u-a;else u=f+a;h=a}else{if(!y.isset(u)||!y.isset(f))throw new ReferenceError("Not enough info for width");h=u-f}if(y.isset(t)){if(!y.isnum(t))throw new TypeError(`Invalid height: ${t}`);if(t<0)throw new RangeError(`height(${t}) < 0`);if(y.isset(l))if(y.isset(c)){if(!E(l+t,c))throw new RangeError(`bottom(${c}) - y|top(${l}) <> height(${t})`)}else c=l+t;else l=c-t;d=t}else{if(!y.isset(l)||!y.isset(c))throw new ReferenceError("Not enough info for height");d=c-l}w(this,g,l),w(this,m,u),w(this,p,c),w(this,v,f),w(this,b,h),w(this,T,d)}static isRect(t){return t instanceof this}get top(){return r(this,g)}get right(){return r(this,m)}get bottom(){return r(this,p)}get left(){return r(this,v)}get width(){return r(this,b)}get height(){return r(this,T)}get x(){return this.left}get y(){return this.top}offsetX(t=0){if(!y.isnum(t))throw new TypeError(`Invalid x: ${t}`);return w(this,v,this.left+t),w(this,m,this.right+t),this}offsetY(t=0){if(!y.isnum(t))throw new TypeError(`Invalid y: ${t}`);return w(this,g,this.top+t),w(this,p,this.bottom+t),this}offset(t,e){return s.default.isPoint(t)?(this.offsetX(t.x),this.offsetY(t.y)):(this.offsetX(t),this.offsetY(e)),this}moveToX(t=this.left){if(!y.isnum(t))throw new TypeError(`Invalid x: ${t}`);return this.offsetX(t-this.left),this}moveToY(t=this.top){if(!y.isnum(t))throw new TypeError(`Invalid y: ${t}`);return this.offsetY(t-this.top),this}moveTo(t,e){return s.default.isPoint(t)?(this.moveToX(t.x),this.moveToY(t.y)):(this.moveToX(t),this.moveToY(e)),this}clone(){return new A({top:this.top,right:this.right,bottom:this.bottom,left:this.left,width:this.width,height:this.height})}}n.default=A,g=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,b=new WeakMap,T=new WeakMap},{"../stdlib":14,"./Point":11}],13:[function(t,e,n){"use strict";var r,i,s=this&&this.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},o=this&&this.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),n.toPack=n.toRect=n.Pack=void 0;const h=t("../stdlib"),d=a(t("./Rect"));class g{constructor(t,e=!1){if(r.set(this,void 0),i.set(this,void 0),g.isPack(t)){const{rectangle:n}=t;s(this,r,e?n.clone():n),s(this,i,t.raw)}else s(this,r,l(t)),s(this,i,t)}static isPack(t){return t instanceof this}get raw(){return o(this,i)}get rectangle(){return o(this,r)}clone(){return new g(this,!0)}}function l(t){if(!h.isset(t))throw new ReferenceError("Not assign source");if(d.default.isRect(t))return t;if(g.isPack(t))return t.rectangle;if(t instanceof Window||t instanceof Document){var e=window.innerWidth,n=window.innerHeight;return new d.default({x:0,y:0,top:0,right:e,bottom:n,left:0,width:e,height:n})}if(t instanceof Element){var{borderTopWidth:r,borderRightWidth:i,borderBottomWidth:s,borderLeftWidth:o,boxSizing:a}=h.getStyle(t),{top:l,right:u,bottom:c,left:f,width:e,height:n}=t.getBoundingClientRect(),a=!/\bborder-box\b/i.test(a),r=a?h.tonum(r):0,i=a?h.tonum(i):0,s=a?h.tonum(s):0,o=a?h.tonum(o):0,e=e-i-o,n=n-r-s;return t===document.body?new d.default({top:r,right:e,bottom:n,left:o,width:e,height:n}):new d.default({top:l+r,right:u-i,bottom:c-s,left:f+o,width:e,height:n})}return new d.default(t)}n.Pack=g,r=new WeakMap,i=new WeakMap,n.toRect=l,n.toPack=function(t){return g.isPack(t)?t:new g(t)}},{"../stdlib":14,"./Rect":12}],14:[function(t,e,n){"use strict";function r(t){return void 0!==t}function i(t){return"string"==typeof t||r(t)&&t instanceof String}function s(t){return!Number.isNaN(t)}function o(t){return s(t)&&t===(0|t)}function a(t){return"object"==typeof t}function l(t){return a(t)&&o(t.length)&&0<=t.length}function u(t){return Object.keys(t)}function c(n,r,t){return u(n).reduce((t,e)=>r(t,n[e],e,n),t)}Object.defineProperty(n,"__esModule",{value:!0}),n.isinEnum=n.getStyle=n.objMap=n.objReduce=n.objValues=n.objKeys=n.toarray=n.arrayable=n.isarray=n.isobj=n.isfunc=n.toint=n.isint=n.tonum=n.isnum=n.tostr=n.isstr=n.isnull=n.isset=void 0,n.isset=r,n.isnull=function(t){return null===t},n.isstr=i,n.tostr=function(t){return`${t}`},n.isnum=s,n.tonum=function(t){return parseFloat(t)},n.isint=o,n.toint=function(t){return s(t)?0|t:parseInt(t,10)},n.isfunc=function(t){return"function"==typeof t},n.isobj=a,n.isarray=function(t){return Array.isArray(t)},n.arrayable=l,n.toarray=function(t){return i(t)||l(t)?[...t]:[t]},n.objKeys=u,n.objValues=function(e){return u(e).map(t=>e[t])},n.objReduce=c,n.objMap=function(r,i,s=this){return c(r,(t,e,n)=>Object.assign(Object.assign({},t),{[n]:i.call(s,e,n,r)}),{})},n.getStyle=function(t){return(null==t?void 0:t.currentStyle)||(null===window||void 0===window?void 0:window.getComputedStyle(t))||(null==t?void 0:t.style)},n.isinEnum=function(t,e){return a(e)&&t in e}},{}]},{},[1]);